"use strict";window.addEventListener("DOMContentLoaded",()=>{let e=document.querySelector("header"),t=document.querySelector(".burger"),o=e.querySelector(".header__menu");t.addEventListener("click",(function(){o.classList.toggle("_active"),t.classList.toggle("_active"),document.body.classList.toggle("lock")})),document.addEventListener("click",e=>{e.composedPath().includes(o)||e.composedPath().includes(t)||(o.classList.remove("_active"),t.classList.remove("_active"),document.body.classList.remove("lock"))});let l=document.querySelector(".steps"),r=document.querySelectorAll(".steps__pic");function c(){document.querySelectorAll(".steps__line").forEach(e=>{e.remove()});let e=!0;for(let t=0;t<r.length-1;t++){let o=5,c="#C4C4C4",n=6;if(window.matchMedia("(max-width: 992px)").matches&&(e=(t+1)%3!=0),window.matchMedia("(max-width: 576px)").matches&&(e=(t+1)%2!=0,o=4),window.matchMedia("(max-width: 480px)").matches&&(o=3),e){let e=[{x:r[t].offsetLeft+r[t].offsetWidth,y:r[t].offsetTop+r[t].offsetHeight/2},{x:r[t+1].offsetLeft,y:r[t+1].offsetTop+r[t].offsetHeight/2}];l.insertAdjacentHTML("beforeend",`\n                    <svg class='steps__line' \n                    style='left: ${e[0].x}px;  top: ${e[0].y}px; width: ${e[1].x-e[0].x}px; height: ${n}px;'\n                    >\n                    </svg>\n                `);for(let e=0;e<o;e++){let t=document.querySelectorAll(".steps__line")[document.querySelectorAll(".steps__line").length-1],l=parseInt(1*getComputedStyle(t).width.split("px")[0]/(o+1));t.insertAdjacentHTML("beforeend",`\n                        <circle cx="${(e+1)*l}" cy="${n/2}" r="${n/2}" fill="${c}" />\n                    `)}}}}function n(){if(window.matchMedia("(max-width: 992px)").matches&&window.matchMedia("(min-width: 576px)").matches){document.querySelectorAll("form.form").forEach(e=>{let t=e.querySelector("._scale"),o=e.querySelectorAll(".form__field"),l=(getComputedStyle(e).gridTemplateColumns.match(/px/g)||[]).length;o.length%2!=0&&(t.style.gridRowStart=Math.ceil(o.length/l),t.style.gridColumn="span 2")})}}window.addEventListener("resize",c),c(),document.querySelectorAll(".scale").forEach(e=>{let t=e.querySelector(".scale__line"),o=e.querySelector(".scale__value");t.addEventListener("input",()=>{o.innerHTML=t.value+"%"})}),document.querySelectorAll(".file").forEach(e=>{let t=e.querySelector(".file__input"),o=e.querySelector(".file__text");t.addEventListener("change",()=>{o.innerHTML=t.files[0].name})}),document.querySelectorAll(".dropdown").forEach(e=>function(e){let t=e.querySelector(".dropdown__title"),o=e.querySelector(".dropdown__title_text"),l=e.querySelectorAll(".dropdown__item");t.addEventListener("click",()=>{e.classList.toggle("_open")}),l&&l.forEach(t=>{t.addEventListener("click",()=>{o.textContent=t.textContent,l.forEach(e=>{e.classList.remove("_active")}),t.classList.add("_active"),e.classList.remove("_open")})});document.addEventListener("click",t=>{t.composedPath().includes(e)||e.classList.remove("_open")})}(e)),document.querySelectorAll("form.form").forEach(e=>{e.querySelector("._submit").addEventListener("click",()=>{!function(e){let t=e.querySelectorAll(".form__input"),o=e.querySelector("._email input"),l=!0;t.forEach(e=>{e.classList.contains("_required")&&(""==e.value?(l=!1,e.parentNode.classList.add("_error")):e.parentNode.classList.remove("_error"))}),o.classList.contains("_required")&&0==function(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.value)?(e.parentNode.classList.remove("_error"),!0):(e.parentNode.classList.add("_error"),e.scrollIntoView({behavior:"smooth",block:"center"}),!1)}(o)&&(l=!1);l&&alert("Форма отправлена")}(e)})}),n(),window.addEventListener("resize",n)});